<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>opusfile: Decoding</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="opus_logo.svg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">opusfile
   &#160;<span id="projectnumber">0.6</span>
   </div>
   <div id="projectbrief">Stand-alone decoder library for .opus files.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Decoding</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Functions for decoding audio data</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp226a9332d44ee54e9c863d78e0829f0d"></a>These functions retrieve actual decoded audio data from the stream.</p>
<p>The general functions, <a class="el" href="group__stream__decoding.html#ga963c917749335e29bb2b698c1cb20a10" title="Reads more samples from the stream. ">op_read()</a> and <a class="el" href="group__stream__decoding.html#ga73493002d84a234f5e19b70f1dddbe2a" title="Reads more samples from the stream. ">op_read_float()</a> return 16-bit or floating-point output, both using native endian ordering. The number of channels returned can change from link to link in a chained stream. There are special functions, <a class="el" href="group__stream__decoding.html#gaaca17ad3fd6430dc8fd43308149428eb" title="Reads more samples from the stream and downmixes to stereo, if necessary. ">op_read_stereo()</a> and <a class="el" href="group__stream__decoding.html#ga9736f96563500c0978f56f0fd6bdad83" title="Reads more samples from the stream and downmixes to stereo, if necessary. ">op_read_float_stereo()</a>, which always output two channels, to simplify applications which do not wish to handle multichannel audio. These downmix multichannel files to two channels, so they can always return samples in the same format for every link in a chained file.</p>
<p>If the rest of your audio processing chain can handle floating point, those routines should be preferred, as floating point output avoids introducing clipping and other issues which might be avoided entirely if, e.g., you scale down the volume at some other stage. However, if you intend to direct consume 16-bit samples, the conversion in <code>libopusfile</code> provides noise-shaping dithering and, if compiled against <code>libopus</code>&#160;1.1 or later, soft-clipping prevention.</p>
<p><code>libopusfile</code> can also be configured at compile time to use the fixed-point <code>libopus</code> API. If so, <code>libopusfile</code>'s floating-point API may also be disabled. In that configuration, nothing in <code>libopusfile</code> will use any floating-point operations, to simplify support on devices without an adequate FPU.</p>
<dl class="section warning"><dt>Warning</dt><dd>HTTPS streams may be be vulnerable to truncation attacks if you do not check the error return code from <a class="el" href="group__stream__decoding.html#ga73493002d84a234f5e19b70f1dddbe2a" title="Reads more samples from the stream. ">op_read_float()</a> or its associated functions. If the remote peer does not close the connection gracefully (with a TLS "close notify" message), these functions will return <a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded. ...">OP_EREAD</a> instead of 0 when they reach the end of the file. If you are reading from an &lt;https:&gt; URL (particularly if seeking is not supported), you should make sure to check for this error and warn the user appropriately. </dd></dl>
</td></tr>
<tr class="memitem:ga7e70cdd259d3d9c05c74b212da6b88e3"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga7e70cdd259d3d9c05c74b212da6b88e3">op_decode_cb_func</a> )(void *_ctx, OpusMSDecoder *_decoder, void *_pcm, const ogg_packet *_op, int _nsamples, int _nchannels, int _format, int _li)</td></tr>
<tr class="memdesc:ga7e70cdd259d3d9c05c74b212da6b88e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to decode an Opus packet.  <a href="#ga7e70cdd259d3d9c05c74b212da6b88e3">More...</a><br/></td></tr>
<tr class="separator:ga7e70cdd259d3d9c05c74b212da6b88e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae0d5b986dff23a82b6002915268ee3d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#gae0d5b986dff23a82b6002915268ee3d1">op_set_decode_callback</a> (OggOpusFile *_of, <a class="el" href="group__stream__decoding.html#ga7e70cdd259d3d9c05c74b212da6b88e3">op_decode_cb_func</a> _decode_cb, void *_ctx) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gae0d5b986dff23a82b6002915268ee3d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the packet decode callback function.  <a href="#gae0d5b986dff23a82b6002915268ee3d1">More...</a><br/></td></tr>
<tr class="separator:gae0d5b986dff23a82b6002915268ee3d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7df927613ccf57996319678e08513289"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga7df927613ccf57996319678e08513289">op_set_gain_offset</a> (OggOpusFile *_of, int _gain_type, opus_int32 _gain_offset_q8) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga7df927613ccf57996319678e08513289"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the gain to be used for decoded output.  <a href="#ga7df927613ccf57996319678e08513289">More...</a><br/></td></tr>
<tr class="separator:ga7df927613ccf57996319678e08513289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1de9480ad0fa65de778d9c88f62f6f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#gac1de9480ad0fa65de778d9c88f62f6f3">op_set_dither_enabled</a> (OggOpusFile *_of, int _enabled) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gac1de9480ad0fa65de778d9c88f62f6f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets whether or not dithering is enabled for 16-bit decoding.  <a href="#gac1de9480ad0fa65de778d9c88f62f6f3">More...</a><br/></td></tr>
<tr class="separator:gac1de9480ad0fa65de778d9c88f62f6f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga963c917749335e29bb2b698c1cb20a10"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga963c917749335e29bb2b698c1cb20a10">op_read</a> (OggOpusFile *_of, opus_int16 *_pcm, int _buf_size, int *_li) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga963c917749335e29bb2b698c1cb20a10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads more samples from the stream.  <a href="#ga963c917749335e29bb2b698c1cb20a10">More...</a><br/></td></tr>
<tr class="separator:ga963c917749335e29bb2b698c1cb20a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73493002d84a234f5e19b70f1dddbe2a"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga73493002d84a234f5e19b70f1dddbe2a">op_read_float</a> (OggOpusFile *_of, float *_pcm, int _buf_size, int *_li) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga73493002d84a234f5e19b70f1dddbe2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads more samples from the stream.  <a href="#ga73493002d84a234f5e19b70f1dddbe2a">More...</a><br/></td></tr>
<tr class="separator:ga73493002d84a234f5e19b70f1dddbe2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaca17ad3fd6430dc8fd43308149428eb"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#gaaca17ad3fd6430dc8fd43308149428eb">op_read_stereo</a> (OggOpusFile *_of, opus_int16 *_pcm, int _buf_size) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:gaaca17ad3fd6430dc8fd43308149428eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads more samples from the stream and downmixes to stereo, if necessary.  <a href="#gaaca17ad3fd6430dc8fd43308149428eb">More...</a><br/></td></tr>
<tr class="separator:gaaca17ad3fd6430dc8fd43308149428eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9736f96563500c0978f56f0fd6bdad83"><td class="memItemLeft" align="right" valign="top">OP_WARN_UNUSED_RESULT int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga9736f96563500c0978f56f0fd6bdad83">op_read_float_stereo</a> (OggOpusFile *_of, float *_pcm, int _buf_size) OP_ARG_NONNULL(1)</td></tr>
<tr class="memdesc:ga9736f96563500c0978f56f0fd6bdad83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads more samples from the stream and downmixes to stereo, if necessary.  <a href="#ga9736f96563500c0978f56f0fd6bdad83">More...</a><br/></td></tr>
<tr class="separator:ga9736f96563500c0978f56f0fd6bdad83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55ed1cb616d856a47d618fa099c742aa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga55ed1cb616d856a47d618fa099c742aa">OP_DEC_FORMAT_SHORT</a>&#160;&#160;&#160;(7008)</td></tr>
<tr class="memdesc:ga55ed1cb616d856a47d618fa099c742aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the decoding callback should produce signed 16-bit native-endian output samples.  <a href="#ga55ed1cb616d856a47d618fa099c742aa">More...</a><br/></td></tr>
<tr class="separator:ga55ed1cb616d856a47d618fa099c742aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5c6e0837a5d747fd909aff905f5da3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#gac5c6e0837a5d747fd909aff905f5da3f">OP_DEC_FORMAT_FLOAT</a>&#160;&#160;&#160;(7040)</td></tr>
<tr class="memdesc:gac5c6e0837a5d747fd909aff905f5da3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the decoding callback should produce 32-bit native-endian float samples.  <a href="#gac5c6e0837a5d747fd909aff905f5da3f">More...</a><br/></td></tr>
<tr class="separator:gac5c6e0837a5d747fd909aff905f5da3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf421eba19d82d5b0c170b548b8ff79f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#gaf421eba19d82d5b0c170b548b8ff79f1">OP_DEC_USE_DEFAULT</a>&#160;&#160;&#160;(6720)</td></tr>
<tr class="memdesc:gaf421eba19d82d5b0c170b548b8ff79f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the decoding callback did not decode anything, and that <code>libopusfile</code> should decode normally instead.  <a href="#gaf421eba19d82d5b0c170b548b8ff79f1">More...</a><br/></td></tr>
<tr class="separator:gaf421eba19d82d5b0c170b548b8ff79f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga846edba35e7470251a6a95b1e2364855"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga846edba35e7470251a6a95b1e2364855">OP_HEADER_GAIN</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:ga846edba35e7470251a6a95b1e2364855"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gain offset type that indicates that the provided offset is relative to the header gain.  <a href="#ga846edba35e7470251a6a95b1e2364855">More...</a><br/></td></tr>
<tr class="separator:ga846edba35e7470251a6a95b1e2364855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51082f7c661488bce9bfdf0e5401fabf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga51082f7c661488bce9bfdf0e5401fabf">OP_TRACK_GAIN</a>&#160;&#160;&#160;(3008)</td></tr>
<tr class="memdesc:ga51082f7c661488bce9bfdf0e5401fabf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gain offset type that indicates that the provided offset is relative to the R128_TRACK_GAIN value (if any), in addition to the header gain.  <a href="#ga51082f7c661488bce9bfdf0e5401fabf">More...</a><br/></td></tr>
<tr class="separator:ga51082f7c661488bce9bfdf0e5401fabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4215354abbd19df9eab5a5380dd96cb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stream__decoding.html#ga4215354abbd19df9eab5a5380dd96cb0">OP_ABSOLUTE_GAIN</a>&#160;&#160;&#160;(3009)</td></tr>
<tr class="memdesc:ga4215354abbd19df9eab5a5380dd96cb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gain offset type that indicates that the provided offset should be used as the gain directly, without applying any the header or track gains.  <a href="#ga4215354abbd19df9eab5a5380dd96cb0">More...</a><br/></td></tr>
<tr class="separator:ga4215354abbd19df9eab5a5380dd96cb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga55ed1cb616d856a47d618fa099c742aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_DEC_FORMAT_SHORT&#160;&#160;&#160;(7008)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the decoding callback should produce signed 16-bit native-endian output samples. </p>

</div>
</div>
<a class="anchor" id="gac5c6e0837a5d747fd909aff905f5da3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_DEC_FORMAT_FLOAT&#160;&#160;&#160;(7040)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the decoding callback should produce 32-bit native-endian float samples. </p>

</div>
</div>
<a class="anchor" id="gaf421eba19d82d5b0c170b548b8ff79f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_DEC_USE_DEFAULT&#160;&#160;&#160;(6720)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the decoding callback did not decode anything, and that <code>libopusfile</code> should decode normally instead. </p>

</div>
</div>
<a class="anchor" id="ga846edba35e7470251a6a95b1e2364855"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_HEADER_GAIN&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gain offset type that indicates that the provided offset is relative to the header gain. </p>
<p>This is the default. </p>

</div>
</div>
<a class="anchor" id="ga51082f7c661488bce9bfdf0e5401fabf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_TRACK_GAIN&#160;&#160;&#160;(3008)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gain offset type that indicates that the provided offset is relative to the R128_TRACK_GAIN value (if any), in addition to the header gain. </p>

</div>
</div>
<a class="anchor" id="ga4215354abbd19df9eab5a5380dd96cb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OP_ABSOLUTE_GAIN&#160;&#160;&#160;(3009)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gain offset type that indicates that the provided offset should be used as the gain directly, without applying any the header or track gains. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga7e70cdd259d3d9c05c74b212da6b88e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* op_decode_cb_func)(void *_ctx, OpusMSDecoder *_decoder, void *_pcm, const ogg_packet *_op, int _nsamples, int _nchannels, int _format, int _li)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called to decode an Opus packet. </p>
<p>This should invoke the functional equivalent of opus_multistream_decode() or opus_multistream_decode_float(), except that it returns 0 on success instead of the number of decoded samples (which is known a priori). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_ctx</td><td>The application-provided callback context. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_decoder</td><td>The decoder to use to decode the packet. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_pcm</td><td>The buffer to decode into. This will always have enough room for <em>_nchannels</em> of <em>_nsamples</em> samples, which should be placed into this buffer interleaved. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_op</td><td>The packet to decode. This will always have its granule position set to a valid value. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_nsamples</td><td>The number of samples expected from the packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_nchannels</td><td>The number of channels expected from the packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_format</td><td>The desired sample output format. This is either <a class="el" href="group__stream__decoding.html#ga55ed1cb616d856a47d618fa099c742aa" title="Indicates that the decoding callback should produce signed 16-bit native-endian output samples...">OP_DEC_FORMAT_SHORT</a> or <a class="el" href="group__stream__decoding.html#gac5c6e0837a5d747fd909aff905f5da3f" title="Indicates that the decoding callback should produce 32-bit native-endian float samples. ">OP_DEC_FORMAT_FLOAT</a>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_li</td><td>The index of the link from which this packet was decoded. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A non-negative value on success, or a negative value on error. The error codes should be the same as those returned by opus_multistream_decode() or opus_multistream_decode_float(). </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Decoding was successful. The application has filled the buffer with exactly <code><em>_nsamples*<em>_nchannels</code></em> samples</em> in the requested format. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__stream__decoding.html#gaf421eba19d82d5b0c170b548b8ff79f1" title="Indicates that the decoding callback did not decode anything, and that libopusfile should decode norm...">OP_DEC_USE_DEFAULT</a></td><td>No decoding was done. <code>libopusfile</code> should decode normally instead. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae0d5b986dff23a82b6002915268ee3d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void op_set_decode_callback </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__stream__decoding.html#ga7e70cdd259d3d9c05c74b212da6b88e3">op_decode_cb_func</a>&#160;</td>
          <td class="paramname"><em>_decode_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>_ctx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the packet decode callback function. </p>
<p>This is called once for each packet that needs to be decoded. A call to this function is no guarantee that the audio will eventually be delivered to the application. Some or all of the data from the packet may be discarded (i.e., at the beginning or end of a link, or after a seek), however the callback is required to provide all of it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_of</td><td>The <code>OggOpusFile</code> on which to set the decode callback. </td></tr>
    <tr><td class="paramname">_decode_cb</td><td>The callback function to call. This may be <code>NULL</code> to disable calling the callback. </td></tr>
    <tr><td class="paramname">_ctx</td><td>The application-provided context pointer to pass to the callback on each call. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7df927613ccf57996319678e08513289"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int op_set_gain_offset </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_gain_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">opus_int32&#160;</td>
          <td class="paramname"><em>_gain_offset_q8</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the gain to be used for decoded output. </p>
<p>By default, the gain in the header is applied with no additional offset. The total gain (including header gain and/or track gain, if applicable, and this offset), will be clamped to [-32768,32767]/256 dB. This is more than enough to saturate or underflow 16-bit PCM. </p>
<dl class="section note"><dt>Note</dt><dd>The new gain will not be applied to any already buffered, decoded output. This means you cannot change it sample-by-sample, as at best it will be updated packet-by-packet. It is meant for setting a target volume level, rather than applying smooth fades, etc. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_of</td><td>The <code>OggOpusFile</code> on which to set the gain offset. </td></tr>
    <tr><td class="paramname">_gain_type</td><td>One of <a class="el" href="group__stream__decoding.html#ga846edba35e7470251a6a95b1e2364855" title="Gain offset type that indicates that the provided offset is relative to the header gain...">OP_HEADER_GAIN</a>, <a class="el" href="group__stream__decoding.html#ga51082f7c661488bce9bfdf0e5401fabf" title="Gain offset type that indicates that the provided offset is relative to the R128_TRACK_GAIN value (if...">OP_TRACK_GAIN</a>, or <a class="el" href="group__stream__decoding.html#ga4215354abbd19df9eab5a5380dd96cb0" title="Gain offset type that indicates that the provided offset should be used as the gain directly...">OP_ABSOLUTE_GAIN</a>. </td></tr>
    <tr><td class="paramname">_gain_offset_q8</td><td>The gain offset to apply, in 1/256ths of a dB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a negative value on error. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid. ">OP_EINVAL</a></td><td>The <em>_gain_type</em> was unrecognized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac1de9480ad0fa65de778d9c88f62f6f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void op_set_dither_enabled </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_enabled</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets whether or not dithering is enabled for 16-bit decoding. </p>
<p>By default, when <code>libopusfile</code> is compiled to use floating-point internally, calling <a class="el" href="group__stream__decoding.html#ga963c917749335e29bb2b698c1cb20a10" title="Reads more samples from the stream. ">op_read()</a> or <a class="el" href="group__stream__decoding.html#gaaca17ad3fd6430dc8fd43308149428eb" title="Reads more samples from the stream and downmixes to stereo, if necessary. ">op_read_stereo()</a> will first decode to float, and then convert to fixed-point using noise-shaping dithering. This flag can be used to disable that dithering. When the application uses <a class="el" href="group__stream__decoding.html#ga73493002d84a234f5e19b70f1dddbe2a" title="Reads more samples from the stream. ">op_read_float()</a> or <a class="el" href="group__stream__decoding.html#ga9736f96563500c0978f56f0fd6bdad83" title="Reads more samples from the stream and downmixes to stereo, if necessary. ">op_read_float_stereo()</a>, or when the library has been compiled to decode directly to fixed point, this flag has no effect. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">_of</td><td>The <code>OggOpusFile</code> on which to enable or disable dithering. </td></tr>
    <tr><td class="paramname">_enabled</td><td>A non-zero value to enable dithering, or 0 to disable it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga963c917749335e29bb2b698c1cb20a10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT int op_read </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">opus_int16 *&#160;</td>
          <td class="paramname"><em>_pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>_li</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads more samples from the stream. </p>
<dl class="section note"><dt>Note</dt><dd>Although <em>_buf_size</em> must indicate the total number of values that can be stored in <em>_pcm</em>, the return value is the number of samples <em>per channel</em>. This is done because <ol>
<li>
The channel count cannot be known a priori (reading more samples might advance us into the next link, with a different channel count), so <em>_buf_size</em> cannot also be in units of samples per channel, </li>
<li>
Returning the samples per channel matches the <code>libopus</code> API as closely as we're able, </li>
<li>
Returning the total number of values instead of samples per channel would mean the caller would need a division to compute the samples per channel, and might worry about the possibility of getting back samples for some channels and not others, and </li>
<li>
This approach is relatively fool-proof: if an application passes too small a value to <em>_buf_size</em>, they will simply get fewer samples back, and if they assume the return value is the total number of values, then they will simply read too few (rather than reading too many and going off the end of the buffer). </li>
</ol>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_of</td><td>The <code>OggOpusFile</code> from which to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_pcm</td><td>A buffer in which to store the output PCM samples, as signed native-endian 16-bit values at 48&#160;kHz with a nominal range of <code>[-32768,32767)</code>. Multiple channels are interleaved using the <a href="http://www.xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-800004.3.9">Vorbis channel ordering</a>. This must have room for at least <em>_buf_size</em> values. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_buf_size</td><td>The number of values that can be stored in <em>_pcm</em>. It is recommended that this be large enough for at least 120 ms of data at 48 kHz per channel (5760 values per channel). Smaller buffers will simply return less data, possibly consuming more memory to buffer the data internally. <code>libopusfile</code> may return less data than requested. If so, there is no guarantee that the remaining data in <em>_pcm</em> will be unmodified. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_li</td><td>The index of the link this data was decoded from. You may pass <code>NULL</code> if you do not need this information. If this function fails (returning a negative value), this parameter is left unset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples read per channel on success, or a negative value on failure. The channel count can be retrieved on success by calling <code>op_head(_of,*_li)</code>. The number of samples returned may be 0 if the buffer was too small to store even a single sample for all channels, or if end-of-file was reached. The list of possible failure codes follows. Most of them can only be returned by unseekable, chained streams that encounter a new link. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ac03d35986d3505305d468dd2138b72" title="There was a hole in the page sequence numbers (e.g., a page was corrupt or missing). ">OP_HOLE</a></td><td>There was a hole in the data, and some samples may have been skipped. Call this function again to continue decoding past the hole. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded. ...">OP_EREAD</a></td><td>An underlying read operation failed. This may signal a truncation attack from an &lt;https:&gt; source. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed...">OP_EFAULT</a></td><td>An internal memory allocation failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family...">OP_EIMPL</a></td><td>An unseekable stream encountered a new link that used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid. ">OP_EINVAL</a></td><td>The stream was only partially open. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>An unseekable stream encountered a new link that did not have any logical Opus streams in it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>An unseekable stream encountered a new link with a required header packet that was not properly formatted, contained illegal values, or was missing altogether. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number. ">OP_EVERSION</a></td><td>An unseekable stream encountered a new link with an ID header that contained an unrecognized version number. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa3fa0a3e6facc4f47924271e65bb21ff" title="An audio packet failed to decode properly. ">OP_EBADPACKET</a></td><td>Failed to properly decode the next packet. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a></td><td>We failed to find data we had seen before. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks. ">OP_EBADTIMESTAMP</a></td><td>An unseekable stream encountered a new link with a starting timestamp that failed basic validity checks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga73493002d84a234f5e19b70f1dddbe2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT int op_read_float </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>_pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_buf_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>_li</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads more samples from the stream. </p>
<dl class="section note"><dt>Note</dt><dd>Although <em>_buf_size</em> must indicate the total number of values that can be stored in <em>_pcm</em>, the return value is the number of samples <em>per channel</em>. <ol>
<li>
The channel count cannot be known a priori (reading more samples might advance us into the next link, with a different channel count), so <em>_buf_size</em> cannot also be in units of samples per channel, </li>
<li>
Returning the samples per channel matches the <code>libopus</code> API as closely as we're able, </li>
<li>
Returning the total number of values instead of samples per channel would mean the caller would need a division to compute the samples per channel, and might worry about the possibility of getting back samples for some channels and not others, and </li>
<li>
This approach is relatively fool-proof: if an application passes too small a value to <em>_buf_size</em>, they will simply get fewer samples back, and if they assume the return value is the total number of values, then they will simply read too few (rather than reading too many and going off the end of the buffer). </li>
</ol>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_of</td><td>The <code>OggOpusFile</code> from which to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_pcm</td><td>A buffer in which to store the output PCM samples as signed floats at 48&#160;kHz with a nominal range of <code>[-1.0,1.0]</code>. Multiple channels are interleaved using the <a href="http://www.xiph.org/vorbis/doc/Vorbis_I_spec.html#x1-800004.3.9">Vorbis channel ordering</a>. This must have room for at least <em>_buf_size</em> floats. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_buf_size</td><td>The number of floats that can be stored in <em>_pcm</em>. It is recommended that this be large enough for at least 120 ms of data at 48 kHz per channel (5760 samples per channel). Smaller buffers will simply return less data, possibly consuming more memory to buffer the data internally. If less than <em>_buf_size</em> values are returned, <code>libopusfile</code> makes no guarantee that the remaining data in <em>_pcm</em> will be unmodified. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_li</td><td>The index of the link this data was decoded from. You may pass <code>NULL</code> if you do not need this information. If this function fails (returning a negative value), this parameter is left unset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples read per channel on success, or a negative value on failure. The channel count can be retrieved on success by calling <code>op_head(_of,*_li)</code>. The number of samples returned may be 0 if the buffer was too small to store even a single sample for all channels, or if end-of-file was reached. The list of possible failure codes follows. Most of them can only be returned by unseekable, chained streams that encounter a new link. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ac03d35986d3505305d468dd2138b72" title="There was a hole in the page sequence numbers (e.g., a page was corrupt or missing). ">OP_HOLE</a></td><td>There was a hole in the data, and some samples may have been skipped. Call this function again to continue decoding past the hole. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded. ...">OP_EREAD</a></td><td>An underlying read operation failed. This may signal a truncation attack from an &lt;https:&gt; source. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed...">OP_EFAULT</a></td><td>An internal memory allocation failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family...">OP_EIMPL</a></td><td>An unseekable stream encountered a new link that used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid. ">OP_EINVAL</a></td><td>The stream was only partially open. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>An unseekable stream encountered a new link that did not have any logical Opus streams in it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>An unseekable stream encountered a new link with a required header packet that was not properly formatted, contained illegal values, or was missing altogether. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number. ">OP_EVERSION</a></td><td>An unseekable stream encountered a new link with an ID header that contained an unrecognized version number. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa3fa0a3e6facc4f47924271e65bb21ff" title="An audio packet failed to decode properly. ">OP_EBADPACKET</a></td><td>Failed to properly decode the next packet. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a></td><td>We failed to find data we had seen before. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks. ">OP_EBADTIMESTAMP</a></td><td>An unseekable stream encountered a new link with a starting timestamp that failed basic validity checks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaaca17ad3fd6430dc8fd43308149428eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT int op_read_stereo </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">opus_int16 *&#160;</td>
          <td class="paramname"><em>_pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_buf_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads more samples from the stream and downmixes to stereo, if necessary. </p>
<p>This function is intended for simple players that want a uniform output format, even if the channel count changes between links in a chained stream. </p>
<dl class="section note"><dt>Note</dt><dd><em>_buf_size</em> indicates the total number of values that can be stored in <em>_pcm</em>, while the return value is the number of samples <em>per channel</em>, even though the channel count is known, for consistency with <a class="el" href="group__stream__decoding.html#ga963c917749335e29bb2b698c1cb20a10" title="Reads more samples from the stream. ">op_read()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_of</td><td>The <code>OggOpusFile</code> from which to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_pcm</td><td>A buffer in which to store the output PCM samples, as signed native-endian 16-bit values at 48&#160;kHz with a nominal range of <code>[-32768,32767)</code>. The left and right channels are interleaved in the buffer. This must have room for at least <em>_buf_size</em> values. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_buf_size</td><td>The number of values that can be stored in <em>_pcm</em>. It is recommended that this be large enough for at least 120 ms of data at 48 kHz per channel (11520 values total). Smaller buffers will simply return less data, possibly consuming more memory to buffer the data internally. If less than <em>_buf_size</em> values are returned, <code>libopusfile</code> makes no guarantee that the remaining data in <em>_pcm</em> will be unmodified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples read per channel on success, or a negative value on failure. The number of samples returned may be 0 if the buffer was too small to store even a single sample for both channels, or if end-of-file was reached. The list of possible failure codes follows. Most of them can only be returned by unseekable, chained streams that encounter a new link. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ac03d35986d3505305d468dd2138b72" title="There was a hole in the page sequence numbers (e.g., a page was corrupt or missing). ">OP_HOLE</a></td><td>There was a hole in the data, and some samples may have been skipped. Call this function again to continue decoding past the hole. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded. ...">OP_EREAD</a></td><td>An underlying read operation failed. This may signal a truncation attack from an &lt;https:&gt; source. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed...">OP_EFAULT</a></td><td>An internal memory allocation failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family...">OP_EIMPL</a></td><td>An unseekable stream encountered a new link that used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid. ">OP_EINVAL</a></td><td>The stream was only partially open. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>An unseekable stream encountered a new link that did not have any logical Opus streams in it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>An unseekable stream encountered a new link with a required header packet that was not properly formatted, contained illegal values, or was missing altogether. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number. ">OP_EVERSION</a></td><td>An unseekable stream encountered a new link with an ID header that contained an unrecognized version number. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa3fa0a3e6facc4f47924271e65bb21ff" title="An audio packet failed to decode properly. ">OP_EBADPACKET</a></td><td>Failed to properly decode the next packet. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a></td><td>We failed to find data we had seen before. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks. ">OP_EBADTIMESTAMP</a></td><td>An unseekable stream encountered a new link with a starting timestamp that failed basic validity checks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9736f96563500c0978f56f0fd6bdad83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OP_WARN_UNUSED_RESULT int op_read_float_stereo </td>
          <td>(</td>
          <td class="paramtype">OggOpusFile *&#160;</td>
          <td class="paramname"><em>_of</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>_pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_buf_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads more samples from the stream and downmixes to stereo, if necessary. </p>
<p>This function is intended for simple players that want a uniform output format, even if the channel count changes between links in a chained stream. </p>
<dl class="section note"><dt>Note</dt><dd><em>_buf_size</em> indicates the total number of values that can be stored in <em>_pcm</em>, while the return value is the number of samples <em>per channel</em>, even though the channel count is known, for consistency with <a class="el" href="group__stream__decoding.html#ga73493002d84a234f5e19b70f1dddbe2a" title="Reads more samples from the stream. ">op_read_float()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">_of</td><td>The <code>OggOpusFile</code> from which to read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">_pcm</td><td>A buffer in which to store the output PCM samples, as signed floats at 48&#160;kHz with a nominal range of <code>[-1.0,1.0]</code>. The left and right channels are interleaved in the buffer. This must have room for at least <em>_buf_size</em> values. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">_buf_size</td><td>The number of values that can be stored in <em>_pcm</em>. It is recommended that this be large enough for at least 120 ms of data at 48 kHz per channel (11520 values total). Smaller buffers will simply return less data, possibly consuming more memory to buffer the data internally. If less than <em>_buf_size</em> values are returned, <code>libopusfile</code> makes no guarantee that the remaining data in <em>_pcm</em> will be unmodified. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples read per channel on success, or a negative value on failure. The number of samples returned may be 0 if the buffer was too small to store even a single sample for both channels, or if end-of-file was reached. The list of possible failure codes follows. Most of them can only be returned by unseekable, chained streams that encounter a new link. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ac03d35986d3505305d468dd2138b72" title="There was a hole in the page sequence numbers (e.g., a page was corrupt or missing). ">OP_HOLE</a></td><td>There was a hole in the data, and some samples may have been skipped. Call this function again to continue decoding past the hole. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga3ad48a4f99b1bed72acec552296dfc08" title="An underlying read, seek, or tell operation failed when it should have succeeded. ...">OP_EREAD</a></td><td>An underlying read operation failed. This may signal a truncation attack from an &lt;https:&gt; source. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga2ddb887c0bb55c74ea6be391fabcba59" title="A NULL pointer was passed where one was unexpected, or an internal memory allocation failed...">OP_EFAULT</a></td><td>An internal memory allocation failed. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaeea27378f826033ca23584d8403665d3" title="The stream used a feature that is not implemented, such as an unsupported channel family...">OP_EIMPL</a></td><td>An unseekable stream encountered a new link that used a feature that is not implemented, such as an unsupported channel family. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gae0879acafe9cc0ab72462d291fdb6fb6" title="One or more parameters to a function were invalid. ">OP_EINVAL</a></td><td>The stream was only partially open. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gafca3ae244d24e10b2851c77379453220" title="A purported Ogg Opus stream did not begin with an Ogg page, a purported header packet did not start w...">OP_ENOTFORMAT</a></td><td>An unseekable stream encountered a new link that that did not have any logical Opus streams in it. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#ga534f1b45c8733a2928434e482b38869f" title="A required header packet was not properly formatted, contained illegal values, or was missing altoget...">OP_EBADHEADER</a></td><td>An unseekable stream encountered a new link with a required header packet that was not properly formatted, contained illegal values, or was missing altogether. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa9ae4494f623f3c0609f0b4bd99b8f32" title="The ID header contained an unrecognized version number. ">OP_EVERSION</a></td><td>An unseekable stream encountered a new link with an ID header that contained an unrecognized version number. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaa3fa0a3e6facc4f47924271e65bb21ff" title="An audio packet failed to decode properly. ">OP_EBADPACKET</a></td><td>Failed to properly decode the next packet. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf7b58a439a471366e9eb5b8f2a8cd041" title="We failed to find data we had seen before, or the bitstream structure was sufficiently malformed that...">OP_EBADLINK</a></td><td>We failed to find data we had seen before. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__error__codes.html#gaf82657fc888f1dcf2e0d8f066b8a6cc7" title="The first or last granule position of a link failed basic validity checks. ">OP_EBADTIMESTAMP</a></td><td>An unseekable stream encountered a new link with a starting timestamp that failed basic validity checks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
